<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/web/thymeleaf/layout"
      layout:decorator="web/en/layout">
<div layout:fragment="content">
    <div class="container">
        <div class="row rowMarginTop rowPaddingBottom">
            <div class="col-md-12" style="margin-top:20px;">
                <div>result：</div>
                <div class="row">
                    <div class="col-md-4 clearPadding" th:if="${productList.size()}>0" th:each="item:${productList}">
                        <div class="thumbnail">
                            <a th:href="'/en/productCenter/detail/'+${item.id}"><img th:src="${item.imageUrl}"
                                                                                  class="productImg"
                            ></a>
                            <div class="caption captionOverride">
                                <a th:href="'/en/productCenter/detail/'+${item.id}">
                                    <div th:text="${item.enTitle}"></div>
                                </a>
                            </div>
                        </div>
                    </div>
                    <div th:if="${productList.size()}==0" class="col-md-4 clearPadding">
                        <h4>Non</h4></div>
                </div>
                <div class="row textCenter">
                    <!-- 内容列表分页开始 -->
                    <div style="margin-left:auto;margin-right:auto;">
                        <!-- 处理页数小于等于7 的情况 -->
                        <ul th:if="${(totalPages le 7)&&(totalPages gt 0)}" class="pagination">
                            <li th:if="${pageIndex eq 1}" class="page-item disabled"><a class="page-link">Previous</a></li>
                            <li th:if="${pageIndex gt 1}" class="page-item">
                                <a class="page-link" th:href="'?pageIndex='+(${pageIndex}-1)+'&title='+${searchContent}">Previous</a>
                            </li>

                            <li th:each="index:${#numbers.sequence(1,totalPages)}"
                                th:classappend="${index eq pageIndex}?'active'"
                                class="page-item">
                                <a th:href="'?pageIndex='+(${index})+'&title='+${searchContent}" class="page-link" th:text="${index}"></a>
                            </li>

                            <li th:if="${pageIndex eq totalPages}" class="page-item disabled"><a
                                    class="page-link">Next</a></li>
                            <li th:if="${pageIndex lt totalPages}" class="page-item">
                                <a class="page-link" th:href="'?pageIndex='+(${pageIndex}+1)+'&title='+${searchContent}">Next</a>
                            </li>
                        </ul>

                        <!-- 处理页数大于7 的情况 -->
                        <ul th:if="${totalPages gt 7}" class="pagination">
                            <li th:if="${pageIndex eq 1}" class="page-item disabled"><a class="page-link">Previous</a></li>
                            <li th:if="${pageIndex gt 1}" class="page-item">
                                <a class="page-link" th:href="'?pageIndex='+(${pageIndex}-1)+'&title='+${searchContent}">Previous</a>
                            </li>

                            <!-- 首页 -->
                            <li th:classappend="${pageIndex eq 1}?'active'" class="page-item">
                                <a class="page-link" th:href="'?pageIndex=1&title='+${searchContent}">1</a>
                            </li>

                            <!-- 当前页面小于等于4 -->
                            <li th:if="${pageIndex le 4}" th:each="index:${#numbers.sequence(2,5)}"
                                th:classappend="${index eq pageIndex}?'active'" class="page-item">
                                <a th:href="'?pageIndex='+(${index})+'&title='+${searchContent}" class="page-link" th:text="${index}"></a>
                            </li>
                            <li th:if="${pageIndex le 4}" class="page-item">
                                <a class="page-link" th:href="'?pageIndex=6&title='+${searchContent}">...</a>
                            </li>

                            <!-- 最后一页与当前页面之差小于等于3 -->
                            <li th:if="${totalPages-pageIndex le 3}" class="page-item">
                                <a class="page-link" th:href="'?pageIndex='+(${totalPages}-5)+'&title='+${searchContent}">...</a>
                            </li>
                            <li th:if="${totalPages-pageIndex le 3}"
                                th:each="index:${#numbers.sequence(totalPages-4,totalPages-1)}"
                                th:classappend="${index eq pageIndex}?'active'" class="page-item">
                                <a th:href="'?pageIndex='+(${index})+'&title='+${searchContent}" class="page-link" th:text="${index}"></a>
                            </li>

                            <!-- 最后一页与当前页面之差大于3 且当前页面大于4 -->
                            <li th:if="${(pageIndex gt 4) && (totalPages-pageIndex gt 3)}" class="page-item">
                                <a class="page-link" th:href="'?pageIndex='+(${pageIndex}-2)+'&title='+${searchContent}">...</a>
                            </li>
                            <li th:if="${(pageIndex gt 4) && (totalPages-pageIndex gt 3)}"
                                th:each="index:${#numbers.sequence(pageIndex-1,pageIndex+1)}"
                                th:classappend="${index eq pageIndex}?'active'" class="page-item">
                                <a class="page-link" th:href="'?pageIndex='+(${index})+'&title='+${searchContent}" th:text="${index}"></a>
                            </li>
                            <li th:if="${(pageIndex gt 4) && (totalPages-pageIndex gt 3)}" class="page-item">
                                <a class="page-link" th:href="'?pageIndex='+(${pageIndex}+2)+'&title='+${searchContent}">...</a>
                            </li>

                            <!-- Last -->
                            <li th:classappend="${pageIndex eq totalPages}?'active'" class="page-item">
                                <a class="page-link" th:href="'?pageIndex='+(${totalPages})+'&title='+${searchContent}"
                                   th:text="${totalPages}">Last</a>
                            </li>

                            <li th:if="${pageIndex eq totalPages}" class="page-item disabled"><a
                                    class="page-link">Next</a></li>
                            <li th:if="${pageIndex lt totalPages}" class="page-item">
                                <a class="page-link" th:href="'?pageIndex='+(${pageIndex}+1)+'&title='+${searchContent}">Next</a>
                            </li>

                            <div class="input-group" style="height: 38px;width: 150px; display: none;">
                                <input type="number" min="1" th:max="${totalPages}" th:value="${pageIndex}"
                                       class="form-control toPage">
                                <div class="input-group-append">
                                    <button type="button" class="btn btn-primary toUrl" style="height: 30px;">跳转
                                    </button>
                                </div>
                            </div>

                        </ul>
                    </div>
                    <!-- 内容列表分页结束 -->
                </div>
            </div>
        </div>
    </div>
</html>