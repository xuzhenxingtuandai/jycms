<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/web/thymeleaf/layout"
      layout:decorator="web/en/layout">
<div layout:fragment="content">
    <div class="container">
        <div class="row rowMarginTop rowPaddingBottom">
            <div class="col-md-3 hidden-xs">
                <div class="productClass">
                    <div class="productTitle">
                        Product Categories
                    </div>
                    <div class="productTitleEn">PRODUCTS</div>
                    <div class="proClassShow">
                        <div class="proClassNormal" th:each="item:${productTypeList}">
                            <a th:href="'/en/productCenter/'+${item.id}" th:text="${item.enName}"></a>
                        </div>
                    </div>
                </div>
                <div class="productClass rowMarginTop">
                    <div class="productTitle">
                        News
                    </div>
                    <div class="productTitleEn">News</div>
                    <div class="newsClassShow">
                        <ul>
                            <li th:each="item:${newsList}"><a th:href="'/en/news/'+${item.id}"
                                                              th:text="${#strings.abbreviate(item.enTitle,15)}"></a>
                            </li>
                        </ul>

                    </div>
                </div>
                <div class="kefuShow rowMarginTop">
                    <div class="kefuImg">
                        <img src="/images/kefu_53.jpg">
                    </div>
                    <div class="contactUsBlock" th:utext="${base.enLeftContactUs}">
                    </div>
                </div>
            </div>
            <div class="col-md-9">
                <div id="newTop" class="row">
                    <div th:each="newsItem:${productList}">
                        <div class="newsList" th:onclick="'showNewsDetail('+${newsItem.id}+')'">
                            <div class="newsDate">
                                <div class="newsDateDay" th:text="${#strings.substring(newsItem.addDate,8,10)}"></div>
                                <div class="newsDateYear" th:text="${#strings.substring(newsItem.addDate,0,7)}"></div>
                            </div>
                            <div class="newsC" th:text="${#strings.abbreviate(newsItem.enTitle,28)}"></div>
                            <div class="newsCImg" th:id="'cimg_'+${newsItem.id}"><img
                                    src="/images/jiantouright_03.png"/>
                            </div>
                        </div>
                        <div class="row rowMarginTop rowPaddingBottom" id="newsDetail_"
                             th:id="'newsDetail_'+${newsItem.id}" style="display: none;">
                            <div class="col-md-4">
                                <img th:src="${newsItem.imageUrl}" class="newsImg"/>
                            </div>
                            <div class="col-md-8">
                                <div class="row newsTitle">
                                    <div class="col-md-12" th:text="${#strings.abbreviate(newsItem.enTitle,20)}"></div>
                                </div>
                                <div class="row newsContent">
                                    <div class="col-md-12"
                                         th:text="${#strings.abbreviate(newsItem.enDescription,60)}"></div>
                                </div>
                                <div class="row">
                                    <div class="col-md-12">
                                        <a class="btn btn-primary active" th:href="${'/en/news/'+newsItem.id}"
                                           target="_blank">More+</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="row textCenter">
                    <!-- 内容列表分页开始 -->
                    <div style="margin-left:auto;margin-right:auto;">
                        <!-- 处理页数小于等于7 的情况 -->
                        <ul th:if="${(totalPages le 7)&&(totalPages gt 0)}" class="pagination">
                            <li th:if="${pageIndex eq 1}" class="page-item disabled"><a class="page-link">Previous</a>
                            </li>
                            <li th:if="${pageIndex gt 1}" class="page-item">
                                <a class="page-link" th:href="@{''(pageIndex=${pageIndex}-1)}">Previous</a>
                            </li>

                            <li th:each="index:${#numbers.sequence(1,totalPages)}"
                                th:classappend="${index eq pageIndex}?'active'"
                                class="page-item">
                                <a th:href="@{''(pageIndex=${index})}" class="page-link" th:text="${index}"></a>
                            </li>

                            <li th:if="${pageIndex eq totalPages}" class="page-item disabled"><a
                                    class="page-link">Next</a></li>
                            <li th:if="${pageIndex lt totalPages}" class="page-item">
                                <a class="page-link" th:href="@{''(pageIndex=${pageIndex}+1)}">Next</a>
                            </li>
                        </ul>

                        <!-- 处理页数大于7 的情况 -->
                        <ul th:if="${totalPages gt 7}" class="pagination">
                            <li th:if="${pageIndex eq 1}" class="page-item disabled"><a class="page-link">Previous</a>
                            </li>
                            <li th:if="${pageIndex gt 1}" class="page-item">
                                <a class="page-link" th:href="@{''(pageIndex=${pageIndex}-1)}">Previous</a>
                            </li>

                            <!-- 首页 -->
                            <li th:classappend="${pageIndex eq 1}?'active'" class="page-item">
                                <a class="page-link" th:href="@{''(pageIndex=1)}">1</a>
                            </li>

                            <!-- 当前页面小于等于4 -->
                            <li th:if="${pageIndex le 4}" th:each="index:${#numbers.sequence(2,5)}"
                                th:classappend="${index eq pageIndex}?'active'" class="page-item">
                                <a th:href="@{''(pageIndex=${index})}" class="page-link" th:text="${index}"></a>
                            </li>
                            <li th:if="${pageIndex le 4}" class="page-item">
                                <a class="page-link" th:href="@{''(pageIndex=6)}">...</a>
                            </li>

                            <!-- 最后一页与当前页面之差小于等于3 -->
                            <li th:if="${totalPages-pageIndex le 3}" class="page-item">
                                <a class="page-link" th:href="@{''(pageIndex=${totalPages-5})}">...</a>
                            </li>
                            <li th:if="${totalPages-pageIndex le 3}"
                                th:each="index:${#numbers.sequence(totalPages-4,totalPages-1)}"
                                th:classappend="${index eq pageIndex}?'active'" class="page-item">
                                <a th:href="@{''(pageIndex=${index})}" class="page-link" th:text="${index}"></a>
                            </li>

                            <!-- 最后一页与当前页面之差大于3 且当前页面大于4 -->
                            <li th:if="${(pageIndex gt 4) && (totalPages-pageIndex gt 3)}" class="page-item">
                                <a class="page-link" th:href="@{''(pageIndex=${pageIndex-2})}">...</a>
                            </li>
                            <li th:if="${(pageIndex gt 4) && (totalPages-pageIndex gt 3)}"
                                th:each="index:${#numbers.sequence(pageIndex-1,pageIndex+1)}"
                                th:classappend="${index eq pageIndex}?'active'" class="page-item">
                                <a class="page-link" th:href="@{''(pageIndex=${index})}" th:text="${index}"></a>
                            </li>
                            <li th:if="${(pageIndex gt 4) && (totalPages-pageIndex gt 3)}" class="page-item">
                                <a class="page-link" th:href="@{''(pageIndex=${pageIndex+2})}">...</a>
                            </li>

                            <!-- 尾页 -->
                            <li th:classappend="${pageIndex eq totalPages}?'active'" class="page-item">
                                <a class="page-link" th:href="@{''(pageIndex=${totalPages})}"
                                   th:text="${totalPages}">Last</a>
                            </li>

                            <li th:if="${pageIndex eq totalPages}" class="page-item disabled"><a
                                    class="page-link">Next</a></li>
                            <li th:if="${pageIndex lt totalPages}" class="page-item">
                                <a class="page-link" th:href="@{''(pageIndex=${pageIndex}+1)}">Next</a>
                            </li>

                            <div class="input-group" style="height: 38px;width: 150px; display: none;">
                                <input type="number" min="1" th:max="${totalPages}" th:value="${pageIndex}"
                                       class="form-control toPage">
                                <div class="input-group-append">
                                    <button type="button" class="btn btn-primary toUrl" style="height: 30px;">Jump
                                    </button>
                                </div>
                            </div>

                        </ul>
                    </div>
                    <!-- 内容列表分页结束 -->
                </div>
            </div>
        </div>
    </div>
</html>